{
  "description": "Tests 3 levels of nested Fn::Map with scope inheritance",
  "template": {
    "Fn::Map": [
      ["a", "b"],
      "outer",
      {
        "level1": "outer",
        "nested": {
          "Fn::Map": [
            ["x", "y"],
            "mid",
            {
              "level2": "mid",
              "parentFromOuter": "outer",
              "deepNested": {
                "Fn::Map": [
                  ["1", "2"],
                  {
                    "level3": "_",
                    "fromOuter": "outer",
                    "fromMid": "mid"
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  },
  "expected": [
    {
      "level1": "a",
      "nested": [
        {
          "level2": "x",
          "parentFromOuter": "a",
          "deepNested": [
            { "level3": "1", "fromOuter": "a", "fromMid": "x" },
            { "level3": "2", "fromOuter": "a", "fromMid": "x" }
          ]
        },
        {
          "level2": "y",
          "parentFromOuter": "a",
          "deepNested": [
            { "level3": "1", "fromOuter": "a", "fromMid": "y" },
            { "level3": "2", "fromOuter": "a", "fromMid": "y" }
          ]
        }
      ]
    },
    {
      "level1": "b",
      "nested": [
        {
          "level2": "x",
          "parentFromOuter": "b",
          "deepNested": [
            { "level3": "1", "fromOuter": "b", "fromMid": "x" },
            { "level3": "2", "fromOuter": "b", "fromMid": "x" }
          ]
        },
        {
          "level2": "y",
          "parentFromOuter": "b",
          "deepNested": [
            { "level3": "1", "fromOuter": "b", "fromMid": "y" },
            { "level3": "2", "fromOuter": "b", "fromMid": "y" }
          ]
        }
      ]
    }
  ]
}
